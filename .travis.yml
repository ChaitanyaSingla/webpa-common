language: go
go: 
    - 1.9.2

env: DEP_VERSION="0.4.1"

before_install:
    - sudo pip install --user codecov
    - mkdir -p $GOPATH/bin

    # Download the binary to bin folder in $GOPATH
    - curl -L -s https://github.com/golang/dep/releases/download/v${DEP_VERSION}/dep-linux-amd64 -o $GOPATH/bin/dep

    # Make the binary executable
    - chmod +x $GOPATH/bin/dep

    - curl -s https://codecov.io/bash > codecov.sh
    - chmod 755 ./codecov.sh

install:
    - dep ensure 

script:
    - $TRAVIS_BUILD_DIR/test.sh ./codecov.sh

