language: go
go: 
    - 1.7.3

before_install:
    - sudo pip install --user codecov
    - mkdir -p $GOPATH/bin
    - curl https://glide.sh/get | sh

install:
    - glide install

script:
    - cd $TRAVIS_BUILD_DIR/concurrent && go test -coverprofile=coverage.txt && bash <(curl -s https://codecov.io/bash)
    - cd $TRAVIS_BUILD_DIR/conlimiter && go test -coverprofile=coverage.txt && bash <(curl -s https://codecov.io/bash)
    - cd $TRAVIS_BUILD_DIR/device && go test -coverprofile=coverage.txt && bash <(curl -s https://codecov.io/bash)
    - cd $TRAVIS_BUILD_DIR/fact && go test -coverprofile=coverage.txt && bash <(curl -s https://codecov.io/bash)
    - cd $TRAVIS_BUILD_DIR/garbagetruck && go test -coverprofile=coverage.txt && bash <(curl -s https://codecov.io/bash)
